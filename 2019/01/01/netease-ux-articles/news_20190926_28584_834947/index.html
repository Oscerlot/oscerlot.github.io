<!DOCTYPE html>
<html lang="en">
  <head><!-- hexo injector head_begin start --><!-- Google tag (gtag.js) begins-->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NDVFDN1ZLY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-NDVFDN1ZLY');
    </script>
    <!-- Google tag (gtag.js) ends-->
    <!-- hexo injector head_begin end -->
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Oscar Armstrong-Davies">







<title>Introduction to Elasticsearch | oad</title>



    <link rel="icon" href="/favicon.ico">



<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Roboto+Mono&display=swap');
</style>



    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    




    <!-- scripts list from _config.yml -->
    
    <script src="/js/menu.js"></script>
    










  <meta name="generator" content="Hexo 7.3.0"></head>
  <body>
    <div class="mask-border">
    </div>

    <div class="wrapper">

      <div class="header">
  <div class="flex-container">
    <div class="header-inner">
      <div class="site-brand-container">
        <a href="/">
          
            oad.
          
        </a>
      </div>
      <div id="menu-btn" class="menu-btn" onclick="toggleMenu()">
        Menu
      </div>
      <nav class="site-nav">
        <ul class="menu-list">
          
            
              <li class="menu-item">
                <a href="/archives/">Archive</a>
              </li> 
                   
          
          
            <li class="menu-item search-btn">
              <a href="#">Search</a>
            </li>
          
        </ul>
      </nav>
    </div>
  </div>
</div>


      <div class="main">
        <div class="flex-container">
          <article id="post">

  
    <div class="post-head">
    <div class="post-info">
        <div class="tag-list">
            
        </div>
        <div class="post-title">
            
            
                Introduction to Elasticsearch
            
            
        </div>
        <span class="post-date">
            1 Jan, 2019
        </span>
    </div>
    <div class="post-img">
        
            <img src="https://img.notionusercontent.com/ext/https%3A%2F%2Fnie.res.netease.com%2Fr%2Fpic%2F20221101%2F44056b66-0a0e-45bd-b35b-d122969219eb.png/size/" alt="featured_image">
              
    </div>
</div>
    <div class="post-content">
    <blockquote>
<p><em>Machine Translated from Chinese to English</em><br><a target="_blank" rel="noopener" href="https://ux.163.com/news/"><em><strong>Original article written by ThunderFire UX (NetEase)</strong></em></a></p>
</blockquote>
<p>Elasticsearch is a distributed, RESTful search and data analysis engine with features like fast response, horizontal scaling, high availability, and high accuracy.</p>
<p>Elasticsearch is a full-text search engine toolkit based on Lucene. Because using Lucene requires a high learning curve, Elasticsearch provides a simple and easy-to-use interface on top of it.  When building a website, if you want search functionality, you only need to use the Elasticsearch tool.  Then you can implement a search function.</p>
<h2 id="Inverted-Index-in-Elasticsearch"><a href="#Inverted-Index-in-Elasticsearch" class="headerlink" title="Inverted Index in Elasticsearch"></a>Inverted Index in Elasticsearch</h2><p>The inverted index is an important concept in Elasticsearch. Elasticsearch processes documents through the inverted index.</p>
<p>Suppose we have a bunch of documents, each containing several words. Each word is assigned a certain weight according to the number of times it appears in the corresponding document. Therefore, we store these weighted words in an orderly manner, thus forming an inverted index.</p>
<p>Each word entry in the inverted index is associated with the documents that contain the word.  Therefore, the inverted index comes from the practical need to find related records based on the value of an attribute.</p>
<p>In the index table, the key represents the corresponding attribute value, and the value represents the address of the record with that attribute value. This is different from the usual method of confirming attribute values by records, so we call it an inverted index.</p>
<p>Figure 1.1 shows an example of an inverted index. Suppose there are three articles. The title of article 1 is “Using Spark to Read Data in Hive”. The title of article 2 is “Hive Data Mining Practice”, and the content of article 3 is “Introduction to Spark”. After being processed by the tokenizer in Elasticsearch, the keywords of article 1 will become spark and hive. The keywords of article 2 are hive and data mining practice. The keyword of article 3 is spark. By querying keywords, we can find the articles to which the keywords belong.</p>
<p>&nbsp;<br><img src="https://img.notionusercontent.com/ext/https%3A%2F%2Fnie.res.netease.com%2Fr%2Fpic%2F20190926%2Fd4dd0b95-d5bc-4146-9081-805efc9a51bf.png/size/" alt="https:&#x2F;&#x2F;nie.res.netease.com&#x2F;r&#x2F;pic&#x2F;20190926&#x2F;d4dd0b95-d5bc-4146-9081-805efc9a51bf.png"></p>
<hr>
<p><em>(Figure 1.1 Inverted Index Table)</em></p>
<hr>
<p>Of course, the implementation in Elasticsearch is not so simple.  Issues such as weight, tokenization, and the amount of inverted index data must also be considered to achieve a good query effect.</p>
<h2 id="Elasticsearch-Concepts"><a href="#Elasticsearch-Concepts" class="headerlink" title="Elasticsearch Concepts"></a>Elasticsearch Concepts</h2><h3 id="Basic-Concepts-of-Distributed-Systems"><a href="#Basic-Concepts-of-Distributed-Systems" class="headerlink" title="Basic Concepts of Distributed Systems"></a>Basic Concepts of Distributed Systems</h3><p>Because Elasticsearch is stored in a distributed manner, some knowledge of distributed systems is required. Here are some basic knowledge of distributed systems.</p>
<ol>
<li><strong>Cluster:</strong> Organized by one or more server nodes.</li>
<li><strong>Server Node:</strong> A server node is a server in the cluster, and each server node is identified by a different name.</li>
<li><strong>Shard:</strong> Divide the index into multiple blocks and place them on different machines, which can improve the throughput of the cluster.</li>
<li><strong>Replica:</strong> Copy shards and store them on different machines to improve the disaster tolerance of the cluster.</li>
</ol>
<h3 id="Elasticsearch-Index-Related-Concepts"><a href="#Elasticsearch-Index-Related-Concepts" class="headerlink" title="Elasticsearch Index Related Concepts"></a>Elasticsearch Index Related Concepts</h3><p>Elasticsearch needs to build corresponding indexes for querying, so it also needs to store data. Based on this, it is constructed hierarchically like commonly used relational databases. Below is a description of the difference between relational databases and Elasticsearch.</p>
<p>&nbsp;<br><img src="https://img.notionusercontent.com/ext/https%3A%2F%2Fnie.res.netease.com%2Fr%2Fpic%2F20190926%2F22cfcdd1-b30a-4140-b923-c68e5540f5cc.jpg/size/" alt="https:&#x2F;&#x2F;nie.res.netease.com&#x2F;r&#x2F;pic&#x2F;20190926&#x2F;22cfcdd1-b30a-4140-b923-c68e5540f5cc.jpg"></p>
<hr>
<p><em>(Figure 2.1 Differences between Elasticsearch and Relational Databases)</em></p>
<hr>
<p>The <code>index</code> in Elasticsearch corresponds to the <code>database</code> in MySQL. An <code>index</code>, similar to a <code>database</code>, contains multiple <code>types</code>. <code>Type</code> corresponds to the <code>table</code> in MySQL. A row of data in a MySQL database corresponds to a piece of JSON data in Elasticsearch. Similarly, <code>fields</code> in Elasticsearch represent columns in MySQL.</p>
<h3 id="Common-Elasticsearch-Commands"><a href="#Common-Elasticsearch-Commands" class="headerlink" title="Common Elasticsearch Commands"></a>Common Elasticsearch Commands</h3><p><strong>Create Index:</strong></p>
<p>Create an index named <code>creature</code> with 3 shards and 1 replica:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PUT /creature</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;settings&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;number_of_shards&quot;</span> <span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;number_of_replicas&quot;</span> <span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>&nbsp;<br><img src="https://img.notionusercontent.com/ext/https%3A%2F%2Fnie.res.netease.com%2Fr%2Fpic%2F20190926%2F21765bb2-4d76-4f4d-80ea-ac54aa6e14e4.png/size/" alt="https:&#x2F;&#x2F;nie.res.netease.com&#x2F;r&#x2F;pic&#x2F;20190926&#x2F;21765bb2-4d76-4f4d-80ea-ac54aa6e14e4.png"></p>
<p><strong>Add Data:</strong></p>
<p>Add an index record with id 1 to the collection with index name <code>creature</code> and type name <code>animal</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PUT /creature/animal/<span class="number">1</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;Dog&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;color&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;Brown&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>&nbsp;<br><img src="https://img.notionusercontent.com/ext/https%3A%2F%2Fnie.res.netease.com%2Fr%2Fpic%2F20190926%2F954b0b48-eaf6-4be1-9a96-edfbb6fb7c45.png/size/" alt="https:&#x2F;&#x2F;nie.res.netease.com&#x2F;r&#x2F;pic&#x2F;20190926&#x2F;954b0b48-eaf6-4be1-9a96-edfbb6fb7c45.png"></p>
<p><strong>Query Data:</strong></p>
<p>Query the data record with id 1 in the collection with index name <code>creature</code> and type name <code>animal</code>:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /creature/animal/<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>&nbsp;<br><img src="https://img.notionusercontent.com/ext/https%3A%2F%2Fnie.res.netease.com%2Fr%2Fpic%2F20190926%2F8aa9bee5-0c6f-4950-af64-faf52fa07425.png/size/" alt="https:&#x2F;&#x2F;nie.res.netease.com&#x2F;r&#x2F;pic&#x2F;20190926&#x2F;8aa9bee5-0c6f-4950-af64-faf52fa07425.png"></p>
<p><strong>Delete Data:</strong></p>
<p>Delete the data record with id 1 in the collection with index name <code>creature</code> and type name <code>animal</code>:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE /creature/animal/<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>&nbsp;<br><img src="https://img.notionusercontent.com/ext/https%3A%2F%2Fnie.res.netease.com%2Fr%2Fpic%2F20190926%2Fe743e79a-0599-44c7-b010-58d049bc288c.png/size/" alt="https:&#x2F;&#x2F;nie.res.netease.com&#x2F;r&#x2F;pic&#x2F;20190926&#x2F;e743e79a-0599-44c7-b010-58d049bc288c.png"></p>

</div> 

<script>
    window.onload = detectors();
</script>
    <div class="post-footer">
    <div class="h-line-primary"></div>
    <nav class="post-nav">
        <div class="prev-item">
           
                <div class="icon arrow-left"></div>
                <div class="post-link">
                    <a href="/2019/01/01/netease-ux-articles/news_20190917_28584_833066/">Prev</a>
                </div>
            
        </div>
        <div class="next-item">
            
                <div class="icon arrow-right"></div>
                <div class="post-link">
                  <a href="/2019/01/01/netease-ux-articles/news_20191112_28584_848135/">Next</a>  
                </div>  
            
        </div>
    </nav>
</div>

    
      <div class="post-comment">

     

     
    
    

</div>
     
  
</article>
        </div>
      </div>
      
      <div class="footer">
    <div class="flex-container">
        <div class="footer-text">
            
            
                
        </div>
    </div>
</div>

    </div>

    
      <div class="search-popup">
    <div class="search-popup-overlay">  
    </div>
    <div class="search-popup-window" >
        <div class="search-header">
            <div class="search-input-container">
              <input autocomplete="off" autocapitalize="off" maxlength="80"
                     placeholder="Search Anything" spellcheck="false"
                     type="search" class="search-input">
            </div>
            <div class="search-close-btn">
                <div class="icon close-btn"></div>
            </div>
        </div>
        <div class="search-result-container">
        </div>
    </div>
</div>

<script>
    const searchConfig = {
        path             : "/search.xml",
        top_n_per_article: "1",
        unescape         : "false",
        trigger: "auto",
        preload: "false"
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script>
<script src="/js/search.js"></script>
    
    

  </body>
</html>
